(function(e){function t(t){for(var i,a,r=t[0],c=t[1],l=t[2],p=0,h=[];p<r.length;p++)a=r[p],n[a]&&h.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={app:0},o=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/billshare/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var i=s("64a9"),n=s.n(i);n.a},"0f3c":function(e,t,s){"use strict";var i=s("b44e"),n=s.n(i);n.a},"1be2":function(e,t,s){"use strict";var i=s("a453"),n=s.n(i);n.a},"1c7c":function(e,t,s){"use strict";var i=s("5dac"),n=s.n(i);n.a},"22b0":function(e,t,s){},"269d":function(e,t,s){},"30a9":function(e,t,s){"use strict";var i=s("4e43"),n=s.n(i);n.a},"4e43":function(e,t,s){},"53bd":function(e,t,s){"use strict";var i=s("a146"),n=s.n(i);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:[e.settings.theme],attrs:{id:"app"}},[e.currentUser?s("MenuBar"):e._e(),e.show.loading?s("FullLoading",{attrs:{message:e.getLoadingMessage}}):s("router-view")],1)},o=[],a=s("cebc"),r=s("2f62"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tb",class:[e.settings.theme]},[i("div",{staticClass:"tbT"},[i("router-link",{attrs:{to:"/dashboard",tag:"i"}},[i("img",{attrs:{src:s("9b19")}})])],1),i("ul",{staticClass:"tbL"},[i("router-link",{staticClass:"navL",attrs:{to:"/dashboard",tag:"li"}},[e._v("Dashboard")])],1),i("div",{staticClass:"pN",on:{mouseleave:function(t){e.show.settings=!1,e.show.profile=!1}}},[e._m(0),i("div",{staticClass:"pNTI",on:{click:function(t){t.stopPropagation(),e.show.settings=!0}}},[i("i",{staticClass:"bs-settings",attrs:{title:"Settings"}}),e.show.settings?i("Settings"):e._e()],1),i("div",{staticClass:"pNTI",on:{click:function(t){t.stopPropagation(),e.show.profile=!0}}},[e.settings.show?i("Photo",{attrs:{photo:e.photos[e.currentUser.uid],showAsGuest:e.settings.show.guestImage,text:e.currentUser.displayName}}):e._e(),e.show.profile?i("Profile"):e._e()],1)])])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pNTI"},[s("i",{staticClass:"bs-search",attrs:{title:"Search"}})])}],d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.settings.currency?s("div",{staticClass:"pSettings"},[s("div",{staticClass:"pSettingsC"},[s("div",{staticClass:"pSettingsDiv"},[s("div",{staticClass:"setT"},[e._v("Help Text")]),s("div",{staticClass:"iW"},[s("label",{staticClass:"switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.show.help,expression:"settings.show.help"}],staticClass:"icB",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.show.help)?e._i(e.settings.show.help,null)>-1:e.settings.show.help},on:{change:function(t){var s=e.settings.show.help,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=null,a=e._i(s,o);i.checked?a<0&&e.$set(e.settings.show,"help",s.concat([o])):a>-1&&e.$set(e.settings.show,"help",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.settings.show,"help",n)}}}),s("span",{staticClass:"slider round"})])])]),s("div",{staticClass:"pSettingsDiv"},[s("div",{staticClass:"setT"},[e._v("Theme")]),s("div",{staticClass:"iW",attrs:{id:"themeLister"}},[s("label",{staticClass:"container"},[e._v("Pink\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",checked:"checked",name:"theme",value:"themepink"},domProps:{checked:e._q(e.settings.theme,"themepink")},on:{change:function(t){return e.$set(e.settings,"theme","themepink")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Red\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themered"},domProps:{checked:e._q(e.settings.theme,"themered")},on:{change:function(t){return e.$set(e.settings,"theme","themered")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Blue\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themeblue"},domProps:{checked:e._q(e.settings.theme,"themeblue")},on:{change:function(t){return e.$set(e.settings,"theme","themeblue")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Purple\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themepurple"},domProps:{checked:e._q(e.settings.theme,"themepurple")},on:{change:function(t){return e.$set(e.settings,"theme","themepurple")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Light Blue\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themelightblue"},domProps:{checked:e._q(e.settings.theme,"themelightblue")},on:{change:function(t){return e.$set(e.settings,"theme","themelightblue")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Green\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themegreen"},domProps:{checked:e._q(e.settings.theme,"themegreen")},on:{change:function(t){return e.$set(e.settings,"theme","themegreen")}}}),s("span",{staticClass:"checkmark"})]),s("label",{staticClass:"container"},[e._v("Dark\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.theme,expression:"settings.theme"}],attrs:{type:"radio",name:"theme",value:"themedark"},domProps:{checked:e._q(e.settings.theme,"themedark")},on:{change:function(t){return e.$set(e.settings,"theme","themedark")}}}),s("span",{staticClass:"checkmark"})])])]),s("div",{staticClass:"pSettingsDiv"},[s("div",{staticClass:"setT"},[e._v("Cursive Font")]),s("div",{staticClass:"iW"},[s("label",{staticClass:"switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.cursiveFont,expression:"settings.cursiveFont"}],staticClass:"icB",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.cursiveFont)?e._i(e.settings.cursiveFont,null)>-1:e.settings.cursiveFont},on:{change:function(t){var s=e.settings.cursiveFont,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=null,a=e._i(s,o);i.checked?a<0&&e.$set(e.settings,"cursiveFont",s.concat([o])):a>-1&&e.$set(e.settings,"cursiveFont",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.settings,"cursiveFont",n)}}}),s("span",{staticClass:"slider round"})])])]),s("div",{staticClass:"pSettingsDiv"},[s("div",{staticClass:"setT"},[e._v("Guest Image")]),s("div",{staticClass:"iW"},[s("label",{staticClass:"switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.show.guestImage,expression:"settings.show.guestImage"}],staticClass:"icB",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.show.guestImage)?e._i(e.settings.show.guestImage,null)>-1:e.settings.show.guestImage},on:{change:function(t){var s=e.settings.show.guestImage,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=null,a=e._i(s,o);i.checked?a<0&&e.$set(e.settings.show,"guestImage",s.concat([o])):a>-1&&e.$set(e.settings.show,"guestImage",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.settings.show,"guestImage",n)}}}),s("span",{staticClass:"slider round"})])])]),e.isAdmin?s("div",{staticClass:"pSettingsS"},[e._v("Save")]):e._e(),e.isAdmin?s("div",{staticClass:"apButW",on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[s("span",{staticClass:"apBut"},[e._v("Save")])]):e._e()])]):e._e()},p=[],h=s("59ca"),u=s.n(h),m=(s("e71f"),s("ea7b"),{firebaseConfig:{apiKey:"AIzaSyB1gTLWPHWOHCZFhs1yGuouPZ_F9anANLw",authDomain:"billshare-4f2ac.firebaseapp.com",databaseURL:"https://billshare-4f2ac.firebaseio.com",projectId:"billshare-4f2ac",storageBucket:"billshare-4f2ac.appspot.com",messagingSenderId:"810948359815"},adminUid:"tMfUwcCyAlVEBjRT6oUVrRIjQ8v1"});u.a.initializeApp(m.firebaseConfig);var v=u.a.firestore(),f=u.a.auth(),g=f.currentUser,C=v.collection("persons"),x=v.collection("expenses"),w=v.collection("settings").doc("settings"),P=v.collection("photos"),y={db:v,auth:f,currentUser:g,personCollection:C,expenseCollection:x,settings:w,photos:P},b={computed:Object(a["a"])({},Object(r["b"])(["isAdmin","settings"])),methods:{save:function(){y.settings.set(this.settings,{merge:!0})}}},_=b,E=(s("ef23"),s("2877")),k=Object(E["a"])(_,d,p,!1,null,null,null),$=k.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pMt",style:{background:e.photo?"url("+e.photo+") no-repeat center":e.showAsGuest?"":"var(--soft)"}},[e.photo||e.showAsGuest?e._e():s("span",{style:{background:"var(--soft)"},domProps:{textContent:e._s(e.text.substring(0,2))}})])},S=[],M={name:"Photo",props:["photo","showAsGuest","text"]},R=M,I=(s("a197"),Object(E["a"])(R,A,S,!1,null,null,null)),N=I.exports,O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"proC"},[i("div",{staticClass:"proW"},[i("div",{staticClass:"avatar-upload"},[i("div",{staticClass:"avatar-edit"},[i("label",{staticClass:"editdiv"},[i("i",{staticClass:"bs-edit"}),i("input",{attrs:{id:"imgProUpload",type:"file",accept:".png, .jpg, .jpeg"},on:{change:e.photoChanged}})])]),i("div",{staticClass:"avatar-preview"},[e.photo?i("img",{attrs:{src:e.photo}}):i("img",{attrs:{src:s("c824")}})])]),i("div",{staticClass:"proNC"},[e.edit?i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),i("div",{staticClass:"butPB",staticStyle:{float:"right"},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v("\n          Save\n        ")])]):i("div",{staticClass:"proNW",on:{click:function(t){t.stopPropagation(),e.edit=!0}}},[i("span",{domProps:{textContent:e._s(e.name)}}),i("span",{staticClass:"proE",domProps:{textContent:e._s(e.email)}})])])]),i("div",{staticClass:"proLog",attrs:{title:"Logout"},on:{click:e.logout}},[i("i",{staticClass:"bs-logout"}),i("span",[e._v("Sign Out")])])])},L=[],T=(s("a481"),s("ac6a"),{login:function(e,t,s,i){y.auth.signInWithEmailAndPassword(e,t).then(s,i)},logout:function(e){y.auth.signOut().then(e)},createGuest:function(e,t){y.auth.createUserWithEmailAndPassword("guest@domain.com","guest@123").then(e,t)},getSettings:function(e){y.settings.get().then(e)},saveSettings:function(e,t){y.settings.set(e,{merge:!0}).then(t)},getPhotos:function(e){y.photos.onSnapshot(function(t){var s=[];t.forEach(function(i){s.push({data:i.data().data,id:i.id}),s.length===t.size&&e(s)})})},savePhoto:function(e,t,s,i){y.photos.doc(e).set({data:t}).then(s).catch(i)},getPersonList:function(e){y.personCollection.orderBy("payment","desc").onSnapshot(function(t){var s=[];t.forEach(function(i){var n=i.data();n.id=i.id,n.modified=!1,n.expand=!1,n.modify={name:null,cost:0,toPay:0,mode:null},s.push(n),s.length===t.size&&e(s)})})},addPerson:function(e,t,s){y.personCollection.add(e).then(function(e){t(e.id)}).catch(s)},editPerson:function(e,t,s,i){y.personCollection.doc(e).set(t,{merge:!0}).then(function(){s(e)}).catch(i)},deletePerson:function(e,t,s){y.personCollection.doc(e).delete().then(t).catch(s)},getExpenseList:function(e){y.expenseCollection.orderBy("createdOn","desc").onSnapshot(function(t){var s=[];t.forEach(function(e){var t=e.data();t.id=e.id,t.expand=!1,s.push(t)}),s.length===t.size&&e(s)})},addExpense:function(e,t,s,i){y.expenseCollection.add(e).then(function(i){e.id=i.id,s(e,t)}).catch(i)},editExpense:function(e,t,s,i,n){y.expenseCollection.doc(e).set(t,{merge:!0}).then(function(){t.id=e,i(t,s)}).catch(n)}}),q={name:"Profile",computed:Object(a["a"])({},Object(r["b"])(["currentUser","photos"])),data:function(){return{name:"",email:"",photo:null,edit:!1,password:null}},mounted:function(){console.log(this.currentUser),this.name=this.currentUser.displayName,this.email=this.currentUser.email,this.photo=this.photos[this.currentUser.uid]?this.photos[this.currentUser.uid]:null},methods:{photoChanged:function(){var e=document.getElementById("imgProUpload");if(e.files&&e.files[0]){var t=new FileReader,s=this;t.onload=function(e){Math.ceil(e.total/1024)<25?s.photo=e.currentTarget.result:alert("File Size should be less than 25 Kb")},t.readAsDataURL(e.files[0])}},logout:function(){T.logout(this.logoutCallBack)},logoutCallBack:function(){this.$store.commit("setCurrentUser",null),this.$router.replace("login")},save:function(){this.edit=!1,this.photo&&(console.log(this.photo,this.currentUser.uid),T.savePhoto(this.currentUser.uid,this.photo,this.printR,this.printR))},printR:function(e){console.log(e)}}},B=q,F=(s("1be2"),Object(E["a"])(B,O,L,!1,null,null,null)),j=F.exports,U={name:"MenuBar",components:{Settings:$,Photo:N,Profile:j},computed:Object(a["a"])({},Object(r["b"])(["currentUser","isAdmin","settings","photos"])),mounted:function(){this.init()},data:function(){return{date:null,show:{loading:!0,settings:!1,profile:!1}}},methods:{init:function(){this.date=new Date},getMonth:function(e){var t=["Jan","Feb","Mar","Apr","May","Jue","Jul","Aug","Sept","Oct","Nov","Dec"];return-1===e&&(e=t.length-1),t[e]}}},W=U,D=(s("74cb"),Object(E["a"])(W,c,l,!1,null,null,null)),G=D.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fsloading"},[s("div",{staticClass:"fsM"},[s("div",{staticClass:"fsText"},[e._v(e._s(e.showMessage))]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show.chrome,expression:"show.chrome"}],staticClass:"infinityChrome"},[s("div"),s("div"),s("div")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show.others,expression:"show.others"}],staticClass:"infinity"},[e._m(0),e._m(1),e._m(2)])])])},V=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span")])}],z={name:"FullScreenLoading",props:["message"],data:function(){return{show:{chrome:!0,others:!1},showMessage:""}},mounted:function(){!/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&(this.show.chrome=!1,this.show.others=!0),this.message?this.showMessage=this.message:this.showMessage="Checking your Identity"}},J=z,K=(s("a75a"),Object(E["a"])(J,H,V,!1,null,null,null)),Z=K.exports,X={name:"App",components:{MenuBar:G,FullLoading:Z},computed:Object(a["a"])({},Object(r["b"])(["currentUser","settings"]),{getLoadingMessage:function(){return"Hi "+this.currentUser.displayName+", Loading your App"}}),data:function(){return{show:{loading:!0}}},mounted:function(){this.init()},methods:{init:function(){this.date=new Date,T.getSettings(this.initSettings)},initSettings:function(e){var t=null;e.exists?t=e.data():(t={show:{help:!0,showExpenseMonth:!0,guestImage:!0},theme:"themeblue",currency:"₹",cursiveFont:!0},T.saveSettings(t,this.saveSettingsCallback)),this.$store.commit("saveSettings",t),this.show.loading=!1,this.initPhotos()},saveSettingsCallback:function(){},initPhotos:function(){T.getPhotos(this.commitToStore)},commitToStore:function(e){for(var t={},s=-0;s<e.length;s++)t[e[s].id]=e[s].data;this.$store.commit("savePhotos",t)},hideLoading:function(){this.show.loading=!1}}},Y=X,Q=(s("034f"),Object(E["a"])(Y,n,o,!1,null,null,null)),ee=Q.exports,te=s("8c4f"),se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"logC",on:{mousemove:function(t){return e.mouseOver(t)}}},[i("div",{staticClass:"logW"},[i("div",{staticClass:"logLogo"},[e._m(0),i("div",{staticClass:"logLogoW"},[i("div",{staticClass:"logLogoDiv",attrs:{id:"logLogoDiv"}},[i("img",{style:{transform:"perspective(100px) rotateX("+e.xTransform+"deg) rotateY("+e.yTransform+"deg) scale3d("+e.scale+","+e.scale+","+e.scale+")"},attrs:{src:s("9b19")}})])])]),i("div",{staticClass:"logFW"},[i("FullLoading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{message:"Signing you in..."}}),i("div",{staticClass:"logFC",on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}}},[i("span",{staticClass:"logFT"},[e._v("Login")]),i("div",{staticClass:"logFIC"},[i("div",{staticClass:"logFIG"},[i("label",{staticClass:"logFILab"},[e._v("Email")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"logFI",attrs:{type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),i("div",{staticClass:"logFIG"},[i("label",{staticClass:"logFILab"},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"logFI",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),i("div",{staticClass:"logFB",on:{click:e.login}},[e._v("\n          Sign In\n        ")]),i("div",{staticClass:"logFsG",on:{click:e.loginAsGuest}},[e._v("\n          Sign In As Guest\n        ")])]),e.error?i("div",{staticClass:"logErr",domProps:{textContent:e._s(e.error)}}):e._e()],1)])])},ie=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logTit"},[s("div",[e._v("Expense Share")])])}],ne={name:"login",components:{FullLoading:Z},data:function(){return{email:"",password:"",xTransform:0,yTransform:0,scale:1,loading:!1,height:document.body.offsetHeight,width:document.body.offsetWidth,error:null}},methods:{mouseOver:function(e){var t=e.pageX/this.height,s=e.pageY/this.width,i=10;this.xTransform=i*(s-.5),this.yTransform=-i*(t-.5),this.scale=1.1},login:function(){this.loginToFB(this.email,this.password)},loginToFB:function(e,t,s){this.loading=!0,s||(s=this.loginErrorCallBack),T.login(e,t,this.loginSuccessCallBack,s)},loginSuccessCallBack:function(e){this.$store.commit("setCurrentUser",e),this.$router.replace("dashboard")},loginErrorCallBack:function(){this.loading=!1,this.error="Email & password do not match"},loginAsGuest:function(){this.loginToFB("guest@domain.com","guest@123",this.createGuest)},createGuest:function(e){var t=this;T.createGuest(this.loginAsGuest,function(){t.error=e.message})}}},oe=ne,ae=(s("53bd"),Object(E["a"])(oe,se,ie,!1,null,"009257d6",null)),re=ae.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sign-up"},[i("img",{attrs:{src:s("cf05")}}),i("p",[e._v("Let's create a new account !")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),i("br"),i("button",{on:{click:e.signUp}},[e._v("Sign Up")]),i("span",[e._v("or go back to "),i("router-link",{attrs:{to:"/login"}},[e._v("login")]),e._v(".")],1)])},le=[],de=(s("7f7f"),{name:"signUp",data:function(){return{email:"",password:"",name:""}},methods:{signUp:function(){var e=this;u.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(t){t.updateProfile({displayName:e.name}),e.$router.replace("home")},function(e){alert("Oops. "+e.message)})}}}),pe=de,he=(s("b526"),Object(E["a"])(pe,ce,le,!1,null,"1a75f273",null)),ue=he.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mC"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.show.loading,expression:"!show.loading"}],staticClass:"cW"},[s("ExpenseListing",{staticClass:"eW"}),s("PersonListing",{staticClass:"uW"})],1),e.show.loading?s("div",{staticClass:"cW"},[s("FullLoading",{attrs:{message:"Wait while We prepare your Expenses..."}})],1):e._e()])},ve=[],fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"ewT"},[e._v("\n    Persons "),i("span",[e._v("("+e._s(e.personCollection.length)+")")])]),e.personCollection.length>0?i("div",{staticClass:"ewCon",attrs:{id:"personContainer"}},e._l(e.personCollection,function(e){return i("Person",{key:e.id,attrs:{person:e,expand:e.expand,modified:e.modified,modifyBalPay:e.modify.balPayRequired,modifyMode:e.modify.mode,modifyCost:e.modify.cost,modifyName:e.modify.name}})}),1):e._e(),e.isAdmin&&e.show.editor?i("div",{staticClass:"addPerEdit"},[i("div",{staticClass:"overlay",on:{click:e.closeEditor}}),i("div",{staticClass:"apCon"},[e.error?i("div",{staticClass:"err"},[i("span",{domProps:{textContent:e._s(e.error)}})]):e._e(),i("span",{staticClass:"cBut",on:{click:e.closeEditor}},[e._v("×")]),i("div",{staticClass:"avatar-upload"},[i("div",{staticClass:"avatar-edit"},[i("label",{staticClass:"editdiv"},[i("i",{staticClass:"bs-edit"}),i("input",{attrs:{id:"imgUpload",type:"file",accept:".png, .jpg, .jpeg"},on:{change:e.photoChanged}})])]),i("div",{staticClass:"avatar-preview"},[e.editor.photo?i("img",{attrs:{src:e.editor.photo}}):i("img",{attrs:{src:s("c824")}})])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editor.name,expression:"editor.name"}],attrs:{type:"text",placeholder:"Enter Name"},domProps:{value:e.editor.name},on:{input:function(t){t.target.composing||e.$set(e.editor,"name",t.target.value)}}}),i("div",{staticClass:"apButW"},[i("span",{staticClass:"apBut",domProps:{textContent:e._s(e.editor.but)},on:{click:e.addPerson}})])])]):e._e(),e.isAdmin?i("div",{staticClass:"addPerTrig",on:{click:function(t){return e.showEditor("new",null,null,"Add Person")}}},[e._v("\n    + Person\n  ")]):e._e()])},ge=[],Ce=s("5176"),xe=s.n(Ce),we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"perC",attrs:{id:"person_"+e.person.id}},[s("div",{staticClass:"perW",class:{expanded:e.expand}},[s("div",{staticClass:"listHead",class:{expanded:e.expand},on:{click:function(t){return e.expandPerson()}}},[s("div",{staticClass:"listLeft"},[s("Photo",{attrs:{photo:e.photos[e.person.id],showAsGuest:e.settings.show.guestImage,text:e.name}}),s("div",{staticClass:"perName",domProps:{textContent:e._s(e.name)}}),e.isAdmin?s("div",{staticClass:"perDelIi",class:{modified:e.modified},on:{mouseleave:function(t){e.show.options=!1}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!e.show.options,expression:"!show.options"}],staticClass:"bs-more",attrs:{title:"More Options"},on:{click:function(t){t.stopPropagation(),e.show.options=!0}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.show.options,expression:"show.options"}],staticClass:"icWra"},[s("span",{staticClass:"iconHolder"},[s("i",{staticClass:"bs-edit",attrs:{title:"Edit Person"},on:{click:function(t){return t.stopPropagation(),e.$parent.editPerson(e.person,e.photos[e.person.id])}}}),s("i",{staticClass:"bs-wallet",class:{pPaid:e.paid},attrs:{title:"Record Payment"},on:{click:function(t){return t.stopPropagation(),e.markPaid(e.person)}}}),s("i",{staticClass:"bs-delete",attrs:{title:"Move to trash"},on:{click:function(t){return e.deletePerson(e.person.id)}}})])])]):e._e()],1),s("div",{staticClass:"listRight"},[e.expand||e.modified?e._e():s("div",{class:{pPaid:e.paid}},[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(Math.ceil(e.balPayRequired))}})]),!e.expand&&e.modified?s("div",{staticClass:"peModI",class:{modAdd:e.modified&&"add"===e.modifyMode,modSub:e.modified&&"add"!==e.modifyMode}},[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(Math.ceil(e.modifyBalPay))}}),s("i",{class:{"bs-arrow-up":"add"===e.modifyMode,"bs-arrow-down":"add"!==e.modifyMode}}),s("i",{staticClass:"bs-preview"}),s("span",{staticClass:"previewSplit"},[s("span",{domProps:{textContent:e._s("( "+Math.ceil(e.person.payment.balPayRequired)+" "+("add"===e.modifyMode?"+":"-")+" "+Math.ceil(e.modifyCost)+" )")}})])]):e._e()])]),"view"===e.mode?s("div",{staticClass:"listDetailsC",class:{expanded:e.expand}},[e._l(e.expenses,function(t){return s("div",{key:t.id,staticClass:"listDetailsW"},[s("div",{staticClass:"listDetailsFR",class:{pPaid:e.paid&&!e.modified,modAdd:e.modified&&e.person.modify.id==t.id&&"add"===e.modifyMode,modSub:e.modified&&e.person.modify.id==t.id&&"add"!==e.modifyMode},on:{click:function(s){return s.stopPropagation(),e.openExpense(t.id)}}},[s("div",{domProps:{textContent:e._s(t.name)}}),s("div",{staticClass:"mL2"},[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(e.modified&&e.person.modify.id==t.id?"add"===e.modifyMode?Math.ceil(t.cost+e.modifyCost):Math.ceil(t.cost-e.modifyCost):Math.ceil(t.cost))}}),e.modified&&e.person.modify.id==t.id?s("span",{domProps:{textContent:e._s("( "+Math.ceil(t.cost)+" "+("add"===e.modifyMode?"+":"-")+" "+Math.ceil(e.modifyCost)+" )")}}):e._e()])])])}),e.modified&&"new"===e.person.modify.id?s("div",{staticClass:"listDetailsW"},[s("div",{staticClass:"listDetailsFR",class:{modAdd:!0},on:{click:function(t){return t.stopPropagation(),e.openExpense("new")}}},[s("div",{domProps:{textContent:e._s(e.person.modify.name)}}),s("div",[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(Math.ceil(e.modifyCost))}})])])]):e._e(),e.modified&&"new"!==e.person.modify.id&&!e.person.expenses[e.person.modify.id]?s("div",{staticClass:"perEx"},[s("div",{staticClass:"peExCRight modAdd",on:{click:function(t){return t.stopPropagation(),e.openExpense(e.person.modify.id)}}},[s("div",{domProps:{textContent:e._s(e.modifyName)}}),s("div",[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(Math.ceil(e.modifyCost))}})])])]):e._e()],2):e._e(),s("div",{staticClass:"listBot",class:{expanded:e.expand}},[e._m(0),s("div",{staticClass:"listRight"},[s("div",{class:{pPaid:e.paid&&!e.modified,modAdd:e.modified&&"add"===e.modifyMode,modSub:e.modified&&"add"!==e.modifyMode}},[e.modified?s("span",{staticClass:"bs-preview"}):e._e(),s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),e.modified?e._e():s("span",{domProps:{textContent:e._s(Math.ceil(e.balPayRequired))}}),e.modified?s("span",[e._v("\n            "+e._s(Math.ceil(e.modifyBalPay)+" ( "+Math.ceil(e.person.payment.balPayRequired)+" "+("add"===e.modifyMode?"+":"-")+" "+Math.ceil(e.modifyCost)+" )")+"\n            "),e.modified?s("i",{class:{"bs-arrow-up":"add"===e.modifyMode,"bs-arrow-down":"add"!==e.modifyMode}}):e._e()]):e._e()])])])])])},Pe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"listLeft"},[s("span",[e._v("Total")])])}],ye={name:"Person",components:{Photo:N},computed:Object(a["a"])({},Object(r["b"])(["isAdmin","settings","photos"])),props:["person","expand","modified","modifyBalPay","modifyMode","modifyCost","modifyName"],data:function(){return{mode:"view",edit:!1,name:"",photo:null,balPayRequired:0,paid:!1,expenses:[],show:{options:!1}}},mounted:function(){this.init()},methods:{init:function(){this.mode=this.edit?"edit":"view",this.initPerson()},initPerson:function(){for(var e in this.name=this.person.name,this.photo=this.person.photo,this.balPayRequired=this.person.payment.balPayRequired,this.paid=this.person.paid,this.expenses=[],this.person.expenses)this.expenses.push(this.person.expenses[e])},expandPerson:function(){if(this.expand){var e=xe()({},this.$route.query);delete e.person,this.$router.push({query:e})}else this.$parent.expandFromChild(this.person.id)},openExpense:function(e){var t=xe()({},this.$route.query);t.expense=e,Ze.push({query:t})},markPaid:function(e){var t={payment:{paid:e.payment.totalPayRequired,balPayRequired:0},paid:!0};T.editPerson(e.id,t,this.printR,this.printR)},deletePerson:function(e){alert("Feature under implementation"+e)},printR:function(e){console.log(e)}}},be=ye,_e=(s("e6cd"),Object(E["a"])(be,we,Pe,!1,null,null,null)),Ee=_e.exports,ke={name:"PersonListing",components:{Person:Ee},computed:Object(a["a"])({},Object(r["b"])(["isAdmin","personCollection"])),props:[],data:function(){return{show:{editor:!1},editor:{id:null,name:"",photo:null,expenses:{}},error:null}},mounted:function(){this.initPersons()},methods:{initPersons:function(){this.show.editor=!1,T.getPersonList(this.commitToStore)},commitToStore:function(e){this.$store.commit("setPersonCollection",e),this.$parent.hideLoading()},expandFromChild:function(e){var t=xe()({},this.$route.query);t.person=e,Ze.push({query:t})},expandPerson:function(){if(this.personCollection){for(var e=0;e<this.personCollection.length;e++)this.personCollection[e].expand=this.$route.query.person===this.personCollection[e].id;if(this.$route.query.person){var t=document.getElementById("person_"+this.$route.query.person);t&&setTimeout(function(){t.scrollIntoView(!0),document.getElementById("personContainer").scrollTop-=100},200)}}},addPerson:function(){if(this.editor.name&&this.editor.name.trim().length>1){this.editor.payment||(this.editor.payment={paid:0,totalPayRequired:0,balPayRequired:0});var e={createdOn:new Date,name:this.editor.name,expenses:this.editor.expenses?this.editor.expenses:{},paid:0===this.editor.payment.balPayRequired,payment:this.editor.payment};"new"===this.editor.id?T.addPerson(e,this.personAdded,this.errorHandler):T.editPerson(this.editor.id,e,this.personAdded,this.errorHandler),console.log(e)}else this.showError("Name Cannot be Empty")},errorHandler:function(){this.closeEditor(),this.showError("Something Went Wrong")},personAdded:function(e){this.editor.photo?T.savePhoto(e,this.editor.photo,this.closeEditorAndInit,this.closeEditorAndInit):this.closeEditorAndInit()},closeEditorAndInit:function(){this.closeEditor(),this.initPersons()},showError:function(e){this.error=e,setTimeout(this.hideError,2e3)},hideError:function(){this.error=null},photoChanged:function(){var e=document.getElementById("imgUpload");if(e.files&&e.files[0]){var t=new FileReader,s=this;t.onload=function(e){Math.ceil(e.total/1024)<25?s.editor.photo=e.currentTarget.result:s.showError("File Size should be less than 25 Kb")},t.readAsDataURL(e.files[0])}},showEditor:function(e,t,s,i,n,o){this.editor.id=e,this.editor.name=t,this.editor.photo=s,this.editor.but=i,this.editor.payment=n,this.editor.expenses=o,this.show.editor=!0},closeEditor:function(){this.show.editor=!1,this.editor.id=null,this.editor.photo=null},editPerson:function(e,t){this.showEditor(e.id,e.name,t,"Edit Person",e.payment,e.expenses)}},watch:{"$route.query.person":function(){this.expandPerson()},personCollection:function(){setTimeout(this.expandPerson,250)}}},$e=ke,Ae=(s("1c7c"),Object(E["a"])($e,fe,ge,!1,null,null,null)),Se=Ae.exports,Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"ewT"},[e._v("\n    Expenses "),s("span",[e._v("("+e._s(e.expenseCollection.length)+")")])]),s("div",{staticClass:"ewCon",attrs:{id:"expenseContainer"}},e._l(e.expenseCollection,function(e,t){return s("Expense",{key:e.id,attrs:{expense:e,expenseIteration:t,expand:e.expand}})}),1),e.isAdmin?s("div",{staticClass:"neBut bs-add",on:{click:e.addExpense}}):e._e()])},Re=[],Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"billC",attrs:{id:"expense_"+e.expense.id}},[s("div",{staticClass:"neW",class:{expanded:e.expand}},[e.error?s("div",{staticClass:"err"},[s("span",{domProps:{textContent:e._s(e.error)}})]):e._e(),s("div",{staticClass:"listHead",class:{edit:"view"!==e.mode,expanded:e.expand},on:{click:function(t){return e.expandExpense(e.expense)}}},[s("div",{staticClass:"listLeft"},["view"!==e.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"Enter Name"},domProps:{value:e.name},on:{click:function(t){return t.stopPropagation(),e.noAct(t)},input:function(t){t.target.composing||(e.name=t.target.value)}}}):s("span",{attrs:{id:"expenseName_"+e.expense.id},domProps:{textContent:e._s(this.name)}}),"view"===e.mode&&e.isAdmin?s("i",{staticClass:"bs-edit",attrs:{title:"Edit Expense"},on:{click:function(t){return e.editClick(t)}}}):e._e(),"view"===e.mode&&e.isAdmin?s("i",{staticClass:"bs-delete",attrs:{title:"Move to Trash"},on:{click:function(t){return t.stopPropagation(),e.deleteExpense(t)}}}):e._e(),e.checkTemp?s("div",{staticClass:"neHt"},[s("span",{staticClass:"bs-save"},[e._v(" Not Saved")])]):e._e()]),"view"===e.mode?s("div",{staticClass:"listRight",class:{expanded:e.expand}},[s("span",{domProps:{textContent:e._s(this.date)}}),e.expand?e._e():s("span",[s("span",{domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(this.cost)}})])]):e.expand?s("div",{staticClass:"listRight"},["view"!==e.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],attrs:{type:"date",placeholder:"Enter Date"},domProps:{value:e.date},on:{click:function(t){return t.stopPropagation(),e.noAct(t)},input:function(t){t.target.composing||(e.date=t.target.value)}}}):e._e(),s("div",{staticClass:"mL2"},[s("div",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cost,expression:"cost",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Enter Amount",size:"1"},domProps:{value:e.cost},on:{click:function(t){return t.stopPropagation(),e.noAct(t)},input:function(t){t.target.composing||(e.cost=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]):e._e()]),"view"!==e.mode&&e.isAdmin?s("div",{staticClass:"listDetailsC",class:{expanded:e.expand}},[s("div",{staticClass:"exPcTitle"},[s("div",{staticClass:"exPcL",class:{search:e.search.show}},[s("span",{staticClass:"exPcT"},[e._v("Select Persons to include in expense")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search.text,expression:"search.text",modifiers:{trim:!0}}],staticClass:"searchI",attrs:{type:"text"},domProps:{value:e.search.text},on:{input:function(t){t.target.composing||e.$set(e.search,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("i",{staticClass:"bs-search",on:{click:function(t){e.search.show=!e.search.show}}})]),e._m(0)]),s("div",{staticClass:"exPcTab"},[s("div",{staticClass:"exPcL"},[s("div",{staticClass:"exPcPW",class:{help:e.settings.show.help}},e._l(e.availablePersons,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.name.toLowerCase().indexOf(e.search.text),expression:"person.name.toLowerCase().indexOf(search.text) != -1"}],key:t.id,staticClass:"exPcP",on:{click:function(s){return e.addPerson(t,i)}}},[s("Photo",{attrs:{photo:e.photos[t.id],showAsGuest:e.settings.show.guestImage,text:t.name}}),s("div",{staticClass:"pName",domProps:{textContent:e._s(t.name)}}),s("i",{staticClass:"but bs-add"})],1)}),0)]),s("div",{staticClass:"exPcR"},[s("div",{staticClass:"exPcPW",class:{help:e.settings.show.help}},e._l(e.selectedPersons,function(t,i){return s("div",{key:t.id,staticClass:"exPcP"},[s("Photo",{attrs:{photo:e.photos[t.id],showAsGuest:e.settings.show.guestImage,text:t.name}}),s("div",{staticClass:"pName",domProps:{textContent:e._s(t.name)}}),s("div",{staticClass:"mL2 dF"},[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cost,expression:"person.cost",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.cost},on:{change:function(s){t.omitSplit=!0,e.recalculateSplit()},input:function(s){s.target.composing||e.$set(t,"cost",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"but bs-minus",on:{click:function(s){return e.removePerson(t,i)}}})],1)}),0)])])]):e._e(),"view"===e.mode?s("div",{staticClass:"listDetailsC",class:{expanded:e.expand}},e._l(e.expense.persons,function(t){return s("div",{key:t.id,staticClass:"listDetailsW"},[s("div",{staticClass:"listDetailsFR"},[s("div",[s("Photo",{attrs:{photo:e.photos[t.id],showAsGuest:e.settings.show.guestImage,text:t.name}}),s("span",{domProps:{textContent:e._s(t.name)}})],1),s("div",{staticClass:"mL2"},[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(t.cost)}})])])])}),0):e._e(),s("div",{staticClass:"listBot",class:{expanded:e.expand},attrs:{id:"expenseTot_"+e.expense.id}},[e._m(1),s("div",{staticClass:"listRight"},[s("div",[s("span",{staticClass:"currency",domProps:{textContent:e._s(e.settings.currency)}}),s("span",{domProps:{textContent:e._s(this.cost)}})])])]),e.expand&&"view"!==e.mode?s("div",{staticClass:"editButC"},[s("div",{staticClass:"butPB",on:{click:e.addExpense}},[s("i",{staticClass:"bs-save"}),e._v(" "+e._s(e.mode)+" Expense\n      ")])]):e._e()])])},Ne=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exPcR"},[s("span",{staticClass:"exPcT"},[e._v("Billed Persons")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"listLeft"},[s("span",[e._v("Total")])])}],Oe=s("f499"),Le=s.n(Oe),Te={name:"ExpenseEditor",components:{Photo:N},computed:Object(a["a"])({},Object(r["b"])(["isAdmin","personCollection","settings","photos"]),{checkTemp:function(){return this.expense&&0===this.expense.id.indexOf("TEMP")&&"view"==this.mode}}),props:["expense","expenseIteration","expand"],data:function(){return{name:"",cost:null,costValidate:!1,date:null,persons:{},selectedPersons:[],availablePersons:[],error:null,mode:"view",edit:!1,search:{text:"",show:!1}}},mounted:function(){this.init()},methods:{init:function(){this.expense&&this.expense.id&&"new"===this.expense.id?this.mode="add":this.expense&&this.expense.id?this.mode=this.edit?"edit":"view":this.mode="view",this.initPersons()},expandExpense:function(e){if(this.expand){if("new"!==e.id){var t=xe()({},this.$route.query);delete t.expense,this.$router.push({query:t}),"view"!==this.mode&&this.$parent.resetPreview()}else if(this.expense.id="TEMP_"+Math.random(),this.name&&""==this.name&&(this.name="Unnamed"),this.expense.name=this.name,this.expense.persons={},this.$parent.resetPreview(),"new"===this.$route.query.expense){var s=xe()({},this.$route.query);delete s.expense,this.$router.push({query:s})}}else this.$parent.expandFromChild(e.id)},editClick:function(e){this.edit=!0,this.mode="edit",this.expand&&e.stopPropagation()},noAct:function(){},goBack:function(){this.$parent.show.editor=!1},initExpense:function(){this.availablePersons=[],this.selectedPersons=[],this.persons={},this.costValidate=!1,this.name&&0==this.name.trim().length&&(this.name=""),this.date=null},initPersons:function(){if(this.initExpense(),this.personCollection&&this.personCollection.length!=this.availablePersons.length){for(var e=0;e<this.personCollection.length;e++){var t=this.personCollection[e];this.availablePersons.push({id:t.id,name:t.name,cost:0})}this.expense.id&&"new"!==this.expense.id&&"edit"!==this.mode&&this.initData()}},initData:function(){this.name=this.expense.name,this.cost=this.expense.cost,this.date=this.expense.date;var e=this.availablePersons.length;while(e--)this.expense.persons[this.availablePersons[e].id]&&this.addPerson(this.expense.persons[this.availablePersons[e].id],e,!0);this.recalculateSplit()},addExpense:function(){if(this.name&&this.name.trim().length>0&&this.cost>0&&this.costValidate){var e={createdOn:new Date,name:this.name,cost:this.cost,date:this.date?this.date:null,persons:this.persons,id:this.expense.id},t=JSON.parse(Le()(this.expense.persons));"add"===this.mode?T.addExpense(e,t,this.updatePersons,this.printR):"edit"===this.mode&&T.editExpense(this.expense.id,e,t,this.updatePersons,this.printR)}else this.costValidate?this.showError("Invalid Bill"):this.showError("Billed Person Amount Invalid")},updatePersons:function(e,t){for(var s=JSON.parse(Le()(e.persons)),i=JSON.parse(Le()(this.personCollection)),n=0;n<i.length;n++){var o=i[n],a={},r=!1;if(s[o.id]?(o.expenses[e.id]={id:e.id,name:e.name,cost:s[o.id].cost,date:e.date},r=!0):t[o.id]&&(delete o.expenses[e.id],r=!0),r){var c=0;for(var l in o.expenses)c+=o.expenses[l].cost;a={expenses:o.expenses,payment:{balPayRequired:c-o.payment.paid,totalPayRequired:c},paid:c-o.payment.paid===0},T.editPerson(o.id,a,this.printR,this.printR)}}this.$parent.expenseAdded(e.id)},deleteExpense:function(){alert("Implementing Feature. Come Back Later")},previewExpense:function(){this.name&&this.name.trim().length>0&&this.cost>0&&this.costValidate?this.renderPreview():this.costValidate?(this.showError("Invalid Bill"),this.$parent.resetPreview()):(this.showError("Bill Split not valid"),this.renderPreview())},renderPreview:function(){for(var e=0;e<this.personCollection.length;e++){var t=this.personCollection[e].id;this.persons[t]?"add"===this.mode?(this.personCollection[e].modify={id:this.expense.id,name:this.name,mode:"add",balPayRequired:this.personCollection[e].payment.balPayRequired+this.persons[t].cost,cost:this.persons[t].cost},this.personCollection[e].modified=!0):"edit"===this.mode&&(this.personCollection[e].expenses[this.expense.id]?this.persons[t].cost===this.personCollection[e].expenses[this.expense.id].cost?this.personCollection[e].modified=!1:(this.personCollection[e].modify={id:this.expense.id,name:this.expense.name,mode:this.persons[t].cost>this.personCollection[e].expenses[this.expense.id].cost?"add":"sub",balPayRequired:this.personCollection[e].payment.balPayRequired+this.persons[t].cost-this.personCollection[e].expenses[this.expense.id].cost,cost:Math.abs(this.persons[t].cost-this.personCollection[e].expenses[this.expense.id].cost)},this.personCollection[e].modified=!0):(this.personCollection[e].modify={id:this.expense.id,name:this.name,mode:"add",balPayRequired:this.personCollection[e].payment.balPayRequired+this.persons[t].cost,cost:this.persons[t].cost},this.personCollection[e].modified=!0)):this.expense.persons[t]?(console.log(this.personCollection[e],this.expense.persons),this.personCollection[e].modify={id:this.expense.id,name:this.expense.name,mode:"sub",balPayRequired:this.personCollection[e].payment.balPayRequired-this.personCollection[e].expenses[this.expense.id].cost,cost:this.personCollection[e].expenses[this.expense.id].cost},this.personCollection[e].modified=!0,console.log(this.personCollection[e])):this.personCollection[e].modified=!1}this.$store.commit("setPersonCollection",this.personCollection)},showError:function(e){this.error=e,setTimeout(this.hideError,2e3)},hideError:function(){this.error=null},addPerson:function(e,t,s){this.persons[e.id]||(this.cost>0&&this.name&&this.name.length>0?(this.persons[e.id]=e.id,s?this.selectedPersons.push(e):this.selectedPersons.push({id:e.id,name:e.name,cost:e.cost,omitSplit:e.cost>0}),this.availablePersons.splice(t,1),s||this.recalculateSplit()):void 0==this.cost||0===this.cost?this.showError("Expense Cost Cannot be Zero"):void 0==this.name||0===this.name.length?this.showError("Expense Name Cannot be Empty"):this.showError("Individual Cost must be less than total bill cost to share bill"))},recalculateSplit:function(){var e=0,t=0;this.selectedPersons.forEach(function(s){s.omitSplit?t+=s.cost:e++});for(var s=(this.cost-t)/e,i=0,n=0;n<this.selectedPersons.length;n++)this.selectedPersons[n].omitSplit||(this.selectedPersons[n].cost=s),i+=this.selectedPersons[n].cost,this.persons[this.selectedPersons[n].id]=this.selectedPersons[n];this.costValidate=i===this.cost,"view"!==this.mode&&this.previewExpense()},removePerson:function(e,t){this.persons[e.id]&&(delete this.persons[e.id],this.availablePersons.push({id:e.id,name:e.name,cost:0}),this.selectedPersons.splice(t,1),this.recalculateSplit())},printR:function(e){console.log(e)}},watch:{personCollection:function(){this.initPersons()},cost:function(){this.initPersons()},expand:function(){this.expand||(console.log("hhhh"),this.$parent.resetPreview(),this.mode="view")}}},qe=Te,Be=(s("0f3c"),Object(E["a"])(qe,Ie,Ne,!1,null,null,null)),Fe=Be.exports,je=s("5118"),Ue={name:"ExpenseListing",computed:Object(a["a"])({},Object(r["b"])(["isAdmin","settings","personCollection"])),components:{Expense:Fe},data:function(){return{expenseCollection:[]}},mounted:function(){this.initExpenses()},methods:{initExpenses:function(){T.getExpenseList(this.setExpense)},setExpense:function(e){this.expenseCollection=e},expandExpense:function(){if(this.expenseCollection&&"new"!==this.expenseCollection[0].id){if(this.$route.query.expense&&"new"===this.$route.query.expense){var e=[{id:"new",expand:!1,persons:{}}];this.expenseCollection.forEach(function(t){e.push(t)}),this.expenseCollection=e}for(var t=0;t<this.expenseCollection.length;t++)this.expenseCollection[t].expand=this.$route.query.expense===this.expenseCollection[t].id;if(this.$route.query.expense){var s=document.getElementById("expense_"+this.$route.query.expense);s&&Object(je["setTimeout"])(function(){s.scrollIntoView(!0),document.getElementById("expenseContainer").scrollTop-=100},200)}}},addExpense:function(){void 0===this.$route.query.expense?this.pushRouter("new"):"new"!==this.$route.query.expense&&this.pushRouter("new")},expenseAdded:function(e){this.pushRouter(e),this.initExpenses(),T.getPersonList(this.setPersonInStore)},setPersonInStore:function(e){this.$store.commit("setPersonCollection",e)},expandFromChild:function(e){if("new"===this.expenseCollection[0].id){this.expenseCollection[0].id="TEMP_"+Math.random();var t=this.pushRouter;Object(je["setTimeout"])(function(){t(e)},200)}else this.pushRouter(e)},pushRouter:function(e){var t=xe()({},this.$route.query);t.expense=e,Ze.push({query:t})},resetPreview:function(e){for(var t=0;t<this.personCollection.length;t++)this.personCollection[t].modified=!1;this.$store.commit("setPersonCollection",this.personCollection),e&&e()}},watch:{"$route.query.expense":function(){this.expandExpense()},expenseCollection:function(){Object(je["setTimeout"])(this.expandExpense,250)}}},We=Ue,De=(s("9719"),Object(E["a"])(We,Me,Re,!1,null,null,null)),Ge=De.exports,He={name:"SharedView",computed:{},components:{PersonListing:Se,ExpenseListing:Ge,FullLoading:Z},data:function(){return{show:{loading:!0}}},methods:{hideLoading:function(){this.show.loading=!1}}},Ve=He,ze=(s("30a9"),Object(E["a"])(Ve,me,ve,!1,null,null,null)),Je=ze.exports;i["a"].use(te["a"]);var Ke=new te["a"]({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:re},{path:"/sign-up",name:"SignUp",component:ue},{path:"/dashboard",name:"Dashboard",component:Je,meta:{requiresAuth:!0}}],linkActiveClass:"lAct"});Ke.beforeEach(function(e,t,s){var i=u.a.auth().currentUser,n=e.matched.some(function(e){return e.meta.requiresAuth});n&&!i?s("login"):!n&&i?s("dashboard"):s()});var Ze=Ke;i["a"].use(r["a"]);var Xe=new r["a"].Store({state:{currentUser:null,isAdmin:!1,personCollection:[],expenseCollection:[],settings:{},photos:{}},mutations:{setCurrentUser:function(e,t){e.currentUser=t,e.isAdmin=t&&t.uid===m.adminUid},setPersonCollection:function(e,t){e.personCollection=t},setexpenseCollection:function(e,t){e.expenseCollection=t},saveSettings:function(e,t){e.settings=t},savePhotos:function(e,t){e.photos=t}},actions:{}});y.auth.onAuthStateChanged(function(e){e&&Xe.commit("setCurrentUser",e)});var Ye=Xe;i["a"].config.productionTip=!1;var Qe="";y.auth.onAuthStateChanged(function(){console.log("hhh"),Qe||(Qe=new i["a"]({router:Ze,store:Ye,render:function(e){return e(ee)}}).$mount("#app"))}),new i["a"]({render:function(e){return e(Z)}}).$mount("#initLoading")},5801:function(e,t,s){},"5dac":function(e,t,s){},"60c0":function(e,t,s){},"64a9":function(e,t,s){},"74cb":function(e,t,s){"use strict";var i=s("9ed7"),n=s.n(i);n.a},"88f7":function(e,t,s){},9719:function(e,t,s){"use strict";var i=s("5801"),n=s.n(i);n.a},"9b19":function(e,t,s){e.exports=s.p+"img/logo.svg"},"9ed7":function(e,t,s){},a0dd:function(e,t,s){},a146:function(e,t,s){},a197:function(e,t,s){"use strict";var i=s("22b0"),n=s.n(i);n.a},a453:function(e,t,s){},a75a:function(e,t,s){"use strict";var i=s("88f7"),n=s.n(i);n.a},b44e:function(e,t,s){},b526:function(e,t,s){"use strict";var i=s("269d"),n=s.n(i);n.a},c824:function(e,t,s){e.exports=s.p+"img/guest.svg"},cf05:function(e,t,s){e.exports=s.p+"img/logo.png"},e6cd:function(e,t,s){"use strict";var i=s("a0dd"),n=s.n(i);n.a},ef23:function(e,t,s){"use strict";var i=s("60c0"),n=s.n(i);n.a}});